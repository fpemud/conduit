conduit is a synchronization center.

conduit can be run in 3 ways:
1. used by upper layer applications (through dbus)
2. used by timer (through conduit daemon)
3. used by peer (through conduit daemon)

conduit API should only register to Session Bus.
the main part of conduit is in user process, not in daemon.

we claim to do realtime synchronization

cfg status:
1. green: cfg is valid, peer is online
2. yellow: cfg is valid, peer is offline
3. red: cfg is not synchronized with peer

operations:
push: send my data to target, merge to target, fails if there's conflict
pull: fetch from target, merge to mine, fails if there's conflict
pull(accept-conflict): fetch from target, merge to mine, record conflict and tells the user
copy-to: ...
copy-from: ...

pre/post-operations:
accept-push:
stop-accept-push:
accept-pull:
stop-accept-pull:
accept-copy-to:
stop-accept-copy-to:
accept-copy-from:
stop-accept-copy-from:

not-through-conduit
through-conduit



local(left) --> local(right):
  right copy-from

local(left) <-- local(right):
  left copy-from

local(left,interactive) <-> local(right,interactive):
  left pull(accept-conflict)
  right pull(accept-conflict)

local(left,non-interactive) <-> local(right,non-interactive)
  left pull
  right pull


conduit(left) --> conduit-peer(right)
  right copy-from

conduit(left) <-- conduit-peer(right)
  left copy-from

conduit(left,interactive) <-> conduit-peer(right,interactive)
  left pull(accept-conflict)
  right pull(accept-conflict), there should be no conflict

conduit(left,non-interactive) <-> conduit-peer(right,non-interactive)
  left pull
  right pull

conduit(left,interactive) <-> conduit-peer(right,non-interactive)
  left pull(accept-conflict)
  right pull

conduit(left,non-interactive) <-> conduit-peer(right,interactive)
  left pull
  right pull(accept-conflict)


conduit(left) --> external(right)
  left copy-to

conduit(left) <-- external(right)
  left copy-from

conduit(left,interactive) <-> external(right)
  left pull(accept-conflict)
  left push

conduit(left,non-interactive) <-> external(right)
  left pull
  left push


external(left,controllable) --> external(right)
  left copy-to

external(left,controllable) <-- external(right)
  left copy-from

external(left,controllable,interactive) <-> external(right)
  left pull(accept-conflict)
  left push

external(left,controllable,non-interactive) <-> external(right)
  left pull
  left push




Data Type:
1. File
2. Directory
3. BrowserBookmark
4. element-cd-album: may be transcoded and tailored when sync
5. element-movie: same as above
6. element-tvshow: same as above
7. 
x. custom defined Data Type


DataOperator Type:
1. source-rsync-local: Dir, Source, Active, 



What to sync:
1. /home
2. /var/lib/portage/overlay-fpemud-private
3. /var/lib/portage/distfiles-private
4. elements





daemon is used to:
1. accept control message from peer, start user conduit process to do things
2. advertise to mdns
3. accept callback from cloud, if needed
4. do upnp to open port for cloud-callback
